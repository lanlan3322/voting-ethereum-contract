var Web3 = require('web3')

var web3 = null

async function web3Init() {
  if (ethereum) {
    web3 = new Web3(ethereum);
    try {
      //  https://bit.ly/2QQHXvF
      console.log('ethereum.enable()');
      const accounts = await ethereum.enable();
      web3.eth.defaultAccount = accounts[0];
    } catch (error) {}
  } else if (web3) {
    console.log('load web3.currentProvider');
    web3 = new Web3(web3.currentProvider);
  } else {
    console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
  }
}

web3Init();

module.exports = web3
